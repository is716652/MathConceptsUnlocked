import router from '@ohos.router';

@Entry
@Component
struct FirstOrderDE {
  build() {
    Column() {
      Row() {
        Button('← 返回')
          .fontSize(14)
          .fontColor('#3F51B5')
          .backgroundColor('#F0F0F0')
          .borderRadius(8)
          .padding({ left: 12, right: 12, top: 6, bottom: 6 })
          .onClick(() => router.back())

        Text('微分方程的概念')
          .layoutWeight(1)
          .fontSize(18)
          .fontWeight(FontWeight.Bold)
          .textAlign(TextAlign.Center)
      }
      .width('100%')
      .padding({ left: 8, right: 8, top: 4, bottom: 4 })

      Scroll() {
        Column({ space: 16 }) {
          Text('什么是微分方程?')
            .width('100%')
            .fontSize(20)
            .fontWeight(FontWeight.Bold)
            .fontColor('#2196F3')

          Text('含有未知函数及其导数的方程称为微分方程。\n\n生活中的例子:\n• 人口增长速度与人口数量成正比: dN/dt = kN\n• 物体冷却速度与温差成正比: dT/dt = -k(T-T₀)\n• 弹簧振动: mx\'\' + kx = 0\n\n微分方程是描述自然规律的数学语言!')
            .width('100%')
            .fontSize(15)
            .lineHeight(24)

          Text('📌 基本概念')
            .width('100%')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF9800')

          Text('1. 微分方程: F(x, y, y\', y\'\', ..., y⁽ⁿ⁾) = 0\n   包含自变量x、未知函数y及其导数的方程\n\n2. 阶: 方程中出现的最高阶导数的阶数\n   • y\' + 2y = x  → 一阶\n   • y\'\' + y = 0  → 二阶\n   • y⁽⁴⁾ - y = 0  → 四阶\n\n3. 解: 使方程成立的函数y=φ(x)\n\n4. 通解: 含有独立任意常数的解\n   任意常数个数 = 方程的阶数\n\n5. 特解: 确定了任意常数的解\n\n6. 初值条件: 用于确定常数的条件\n   y(x₀)=y₀, y\'(x₀)=y₁, ...')
            .width('100%')
            .fontSize(14)
            .lineHeight(24)
            .fontFamily('monospace')
            .padding(12)
            .backgroundColor('#FFF3E0')
            .borderRadius(8)

          Text('📝 例1: 验证y=Ce^x是微分方程y\'=y的通解')
            .width('100%')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF6F00')

          Text('解题思路:\n将y=Ce^x代入方程验证\n\n解:\ny = Ce^x\n\n对y求导:\ny\' = Ce^x\n\n代入方程y\'=y:\nCe^x = Ce^x ✓\n\n等式成立,且含一个任意常数C\n\n答: y=Ce^x是y\'=y的通解')
            .width('100%')
            .fontSize(14)
            .lineHeight(22)
            .fontFamily('monospace')
            .padding(12)
            .backgroundColor('#FFECB3')
            .borderRadius(8)

          Text('📝 例2: 求微分方程y\'=2x的通解和满足y(0)=1的特解')
            .width('100%')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF6F00')

          Text('解题思路:\n分离变量后积分\n\n解:\ny\' = 2x\n\ndy/dx = 2x\n\ndy = 2x dx\n\n两边积分:\n∫dy = ∫2x dx\n\ny = x² + C  (通解)\n\n代入初值条件y(0)=1:\n1 = 0² + C\nC = 1\n\n特解: y = x² + 1\n\n答: 通解y=x²+C, 特解y=x²+1')
            .width('100%')
            .fontSize(14)
            .lineHeight(22)
            .fontFamily('monospace')
            .padding(12)
            .backgroundColor('#C8E6C9')
            .borderRadius(8)

          Text('📌 微分方程的分类')
            .width('100%')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor('#4CAF50')

          Text('按阶数分类:\n• 一阶方程: 含y\'但不含高阶导数\n• 二阶方程: 最高导数是y\'\'\n• n阶方程: 最高导数是y⁽ⁿ⁾\n\n按线性性分类:\n• 线性方程: y及其导数都是一次的\n  例: y\' + P(x)y = Q(x)\n• 非线性方程: 含y或导数的高次项\n  例: (y\')² + y = 0')
            .width('100%')
            .fontSize(14)
            .lineHeight(24)
            .fontFamily('monospace')
            .padding(12)
            .backgroundColor('#E8F5E9')
            .borderRadius(8)

          Text('📌 常见一阶微分方程类型')
            .width('100%')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor('#9C27B0')

          Text('1️⃣ 可分离变量方程:\n   形式: g(y)dy = f(x)dx\n   特点: 可以将x和y分离到等号两边\n   例: dy/dx = xy → dy/y = x dx\n\n2️⃣ 齐次方程:\n   形式: dy/dx = φ(y/x)\n   特点: 右边是y/x的函数\n   例: dy/dx = (y²+x²)/(xy)\n\n3️⃣ 一阶线性方程:\n   形式: y\' + P(x)y = Q(x)\n   特点: y和y\'都是一次的\n   例: y\' + 2y = e^x\n\n4️⃣ 伯努利方程:\n   形式: y\' + P(x)y = Q(x)y^n\n   特点: 含有y的n次方\n   例: y\' + y = xy²')
            .width('100%')
            .fontSize(14)
            .lineHeight(24)
            .fontFamily('monospace')
            .padding(12)
            .backgroundColor('#F3E5F5')
            .borderRadius(8)

          Text('📝 例3: 判断下列方程的类型和阶数')
            .width('100%')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF6F00')

          Text('解题思路:\n观察方程形式\n\n(1) y\'\' + 2y\' + y = 0\n    答: 二阶线性齐次方程\n\n(2) dy/dx = x/y\n    答: 一阶可分离变量方程(非线性)\n    y dy = x dx可分离\n\n(3) dy/dx = (y-x)/(y+x)\n    答: 一阶齐次方程\n    右边 = (y/x-1)/(y/x+1), 是y/x的函数\n\n(4) y\' + xy = x\n    答: 一阶线性非齐次方程\n\n(5) (y\')² + y² = 1\n    答: 一阶非线性方程\n    含有(y\')²高次项')
            .width('100%')
            .fontSize(14)
            .lineHeight(22)
            .fontFamily('monospace')
            .padding(12)
            .backgroundColor('#A5D6A7')
            .borderRadius(8)

          Text('📝 例4: 已知y₁=x是某二阶方程的解,y₂=x²也是解,求通解')
            .width('100%')
            .fontSize(16)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF6F00')

          Text('解题思路:\n利用线性方程解的叠加性\n\n解:\n检查y₁和y₂是否线性无关:\ny₂/y₁ = x²/x = x (不是常数)\n\n所以y₁和y₂线性无关\n\n对于二阶线性齐次方程,\n若y₁和y₂是两个线性无关的解,\n则通解为:\nY = C₁y₁ + C₂y₂\n\n答: Y = C₁x + C₂x²')
            .width('100%')
            .fontSize(14)
            .lineHeight(22)
            .fontFamily('monospace')
            .padding(12)
            .backgroundColor('#B2DFDB')
            .borderRadius(8)

          Text('📌 微分方程的几何意义')
            .width('100%')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF5722')

          Text('一阶方程 dy/dx = f(x,y) 的几何意义:\n\n• dy/dx 表示过点(x,y)的积分曲线的切线斜率\n• 方程给出了每一点的切线方向\n• 求解方程 = 找到一族曲线,这些曲线在每点的斜率都满足方程\n\n方向场:\n在平面上每点(x,y)画一小线段,斜率为f(x,y),\n这些小线段构成方向场,积分曲线与方向场相切。\n\n通解的几何意义:\n一族相互平行的曲线(互不相交)')
            .width('100%')
            .fontSize(14)
            .lineHeight(24)
            .fontFamily('monospace')
            .padding(12)
            .backgroundColor('#FFE0B2')
            .borderRadius(8)

          Text('🎯 练习题')
            .width('100%')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF5722')

          Text('1. 判断y\'\' + 2y\' + y = 0 的阶数\n答: 二阶\n\n2. 验证 y = Ce^x 是 y\' = y 的解\n提示: 求导后代入\n\n3. 求 y\' = 3x², y(0)=1 的特解\n答: y = x³ + 1\n\n4. 判断方程 y\' = x + y 的类型\n答: 一阶线性方程(化为y\'-y=x)\n\n5. 验证 y = sin(x) 是 y\'\' + y = 0 的解\n提示: y\' = cos(x), y\'\' = -sin(x)\n\n6. 方程 xy\' = y 是几阶方程?\n答: 一阶(可分离变量)\n\n7. 判断 (y\')³ + xy = 0 是否为线性方程\n答: 非线性(含y\'的三次方)\n\n8. 已知 y = C₁e^x + C₂e^(-x) 是某方程的通解,该方程是几阶的?\n答: 二阶(含两个独立常数)')
            .width('100%')
            .fontSize(15)
            .lineHeight(28)
            .padding(12)
            .backgroundColor('#FFF8E1')
            .borderRadius(8)

          Text('💡 重要提示')
            .width('100%')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor('#607D8B')

          Text('学习微分方程的关键:\n\n1️⃣ 理解概念:\n   • 什么是微分方程的解\n   • 通解与特解的区别\n   • 初值条件的作用\n\n2️⃣ 识别类型:\n   • 阶数(看最高导数)\n   • 线性性(y及导数是否一次)\n   • 具体类型(可分离、齐次、线性等)\n\n3️⃣ 验证解:\n   • 将解代入原方程\n   • 检查任意常数个数\n\n4️⃣ 几何直观:\n   • 方程描述切线方向\n   • 解是满足条件的曲线\n\n下一步学习:\n掌握各类方程的具体求解方法')
            .width('100%')
            .fontSize(15)
            .lineHeight(24)
            .padding(12)
            .backgroundColor('#ECEFF1')
            .borderRadius(8)

          Text('💭 本章小结')
            .width('100%')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor('#607D8B')

          Text('核心概念:\n• 微分方程: 含导数的方程\n• 阶: 最高导数的阶数\n• 解: 使方程成立的函数\n• 通解: 含n个独立常数(n阶方程)\n• 特解: 满足初值条件的解\n\n方程分类:\n• 按阶数: 一阶、二阶、n阶\n• 按线性性: 线性、非线性\n• 常见类型: 可分离、齐次、线性\n\n几何意义:\n• 方程给出切线斜率\n• 解是积分曲线族\n• 通解是一族曲线')
            .width('100%')
            .fontSize(15)
            .lineHeight(24)
        }
        .width('100%')
        .padding(16)
        .alignItems(HorizontalAlign.Start)
      }
      .layoutWeight(1)
      .scrollBar(BarState.On)
      .edgeEffect(EdgeEffect.Spring)
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#FFFFFF')
  }
}
